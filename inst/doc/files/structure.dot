/* Graphe de dÃ©pendance */
/* dot -T pdf -o structure.pdf structure.dot  */

digraph G {
  dpi=200
  size = "8.3, 11.7"
  fontname = Helvetica
  fontnames = "ps"
  compound = true
	rankdir = LR
  ranksep = "0.8"
	nodesep = "0.8"
  //concentrate = true
  splines = line
  //splines = compound
	ratio = "auto"
	//colorscheme=set14 //  1=red, 2=blue, 3=green, 4=violet 

  // # Nodes ----
	node [shape=plaintext, fontsize=25]
	bgcolor=white
	edge [arrowsize=1, color=gray]
	
	// # Genotypic Parameters ----
  CultivarParameters -> ThermalTime [style=invis] // Vertical alignment
	CultivarParameters [fontname="Helvetica Bold"]
	ThermalTimeFlowering [fontname="Helvetica Bold"]
	ThermalTimeMaturity [fontname="Helvetica Bold"]
	LeafNumber [fontname="Helvetica Bold"]
	LeafSize [fontname="Helvetica Bold"]
	LeafProfile [fontname="Helvetica Bold"]
	ExtinctionCoefficient [fontname="Helvetica Bold"]
	PotentialHarvestIndex [fontname="Helvetica Bold"]
	PotentialOilContent [fontname="Helvetica Bold"]
	WaterResponseExpansion [fontname="Helvetica Bold"]
	WaterResponseConductance [fontname="Helvetica Bold"]
	
	
	subgraph clusterInputs {
		label="Inputs"
		fontsize=35
		
	    subgraph clusterInputEnvironment {
			label="Environment"
			fontsize=35
			
			InitialConditions
			
			// # EnvironmentClimate ----  
      subgraph clusterInputEnvironmentClimate {
				label="Climate"
				fontsize=35
				pencolor=gray
				
				Temperature
				Radiation
				PET
				Rainfall
			}
			
			// # EnvironmentManagement ----  
      subgraph clusterInputEnvironmentManagement {
				label="Management"
				fontsize=35
				pencolor=gray
				
				SowingDate
				SowingDensity
				Fertilization
				Irrigation
			}
			
      // # EnvironmentSoil ----
		  subgraph clusterInputEnvironmentSoil {
				label="Soil"
				fontsize=35
				pencolor=gray
				
				WaterCapacity
				RootingDepth
				SoilDensity
				MineralizationRate
			}
		}
		
	    subgraph clusterInputGenetics {
			label="Genetics"
			fontsize=35

		    subgraph clusterInputGeneticsSpecies {
				label="Species"
				fontsize=35
				pencolor=gray
				
				SpeciesParameter
			}
		    
		    subgraph clusterInputGeneticsCultivar {
				label="Cultivar"
				fontsize=35
				pencolor=gray
				
				CultivarParameters
			}
		}
    }
    
		    
	subgraph clusterCrop {
		label="Crop"
		fontsize=35
		

	    subgraph clusterCropPotential {
			label="Potential"
			fontsize=35
			
      // # CropPhenology ----
			subgraph clusterCropPhenology {
				label="Phenology"
				fontsize=35
				pencolor=gray
				
				// Inputs
				LeafNumber -> LeafAppearance
				Temperature -> ThermalTime [style=dotted, colorscheme=set14, color=1]
				
				// Module
				ThermalTime -> {LeafAppearance LeafLongevity}
				LeafAppearance
				LeafLongevity
				
			}
			
			// # CropLeafArea ----
		  subgraph clusterCropLeafArea {
				label="Leaf Area"
				fontsize=35
				pencolor=gray
				
				// Inputs
				{LeafProfile LeafSize} -> LeafGrowthRate
				LeafAppearance -> LeafGrowthRate
				LeafLongevity -> LeafSenescenceRate

				// Module				
				LeafGrowthRate -> LeafArea
				LeafSenescenceRate -> LeafArea
			}
	
			// # CropInterception ----
      subgraph clusterCropInterception {
				label="Light Interception"
				fontsize=35
				pencolor=gray
				
				// Inputs
				ExtinctionCoefficient -> RIE
				LeafArea -> PlantLeafArea
				
				// Module
				PlantLeafArea -> LAI
				LAI -> RIE
		    }
		  
			// # CropBiomass ----
		  subgraph clusterCropBiomass {
				label="Biomass"
				fontsize=35
				pencolor=gray
				
				// Inputs
				{ThermalTimeFlowering ThermalTimeMaturity} -> RUE
				Radiation -> CropBiomass [style=dotted, colorscheme=set14, color=4]
				RIE -> CropBiomass 
				
				// Module
				RUE -> CropBiomass
				CropBiomass
		    }
		  
			// # CropPerformance ----
		  subgraph clusterCropPerformance {
				label="Performance"
				fontsize=35
				pencolor=gray
				
				// Inputs
				PotentialHarvestIndex -> HarvestIndex
				PotentialOilContent -> OilContent
				CropBiomass -> CropYield
				
				// Module
				HarvestIndex -> CropYield
				OilContent
			}
			
		   	//{rank=same; PotentialHarvestIndex; PotentialOilContent}
 			
		}
		    
	    subgraph clusterCropStress {
			label="Environmental Stress"
			fontsize=35
			
			// # CropStressWater ----
      subgraph clusterCropStressWater {
				label="Water Stress"
				fontsize=35
				pencolor=gray

				// Inputs
				WaterResponseConductance -> WaterStressConductance
				WaterResponseExpansion -> WaterStressExpansion
				{RIE PET} -> WaterDemand [style=dotted, colorscheme=set14, color=2]		
				{Rainfall} -> WaterSupply [style=dotted, colorscheme=set14, color=2]
				
				// Module
				RootGrowth -> WaterSupply
				{WaterSupply WaterDemand} -> WaterStress
				WaterStress -> {WaterStressConductance WaterStressExpansion}
				
				// Outputs
				WaterStressExpansion -> LeafGrowthRate [style=dotted, colorscheme=set14, color=2]
				WaterStressConductance -> {ThermalTime RUE} [style=dotted, colorscheme=set14, color=2]
				WaterStress -> HarvestIndex [style=dotted, colorscheme=set14, color=2]
		    }
		    
			// # CropStressNitrogen ----  
      subgraph clusterCropStressNitrogen {
				label="Nitrogen Stress"
				fontsize=35
				pencolor=gray
				
				// Inputs
				//Fertilization -> NitrogenSupply [style=dotted, colorscheme=set14, color=3]
				Temperature -> Mineralization [style=dotted, colorscheme=set14, color=1]
				//WaterStress -> Mineralization [style=dotted, colorscheme=set14, color=2]
				CropBiomass -> NitrogenDemand [style=dotted, colorscheme=set14, color=3]
				
				// Module
				//PotentialMineralizationRate -> Mineralization
				Mineralization -> NitrogenSupply
				{NitrogenSupply NitrogenDemand} -> NitrogenStress
				NitrogenStress -> {NitrogenStressRUE NitrogenStressExpansion}
				
				// Outputs
				NitrogenStressExpansion -> LeafGrowthRate [style=dotted, colorscheme=set14, color=3]
				NitrogenStressRUE -> RUE [style=dotted, colorscheme=set14, color=3]
				
		    }
		  
			// # CropStressTemperature ----
		  subgraph clusterCropStressTemperature {
				label="Thermal Stress"
				fontsize=35
				pencolor=gray
				
				// Inputs
				Temperature -> ThermalStress [style=dotted, colorscheme=set14, color=1]
				
				// Module
				ThermalStress -> {ThermalStressRUE ThermalStressAllocation}
				
				// Outputs
				ThermalStressRUE -> RUE [style=dotted, colorscheme=set14, color=1]
				ThermalStressAllocation -> {HarvestIndex OilContent} [style=dotted, colorscheme=set14, color=1]
			}
			
			// # CropStressRadiation ----
		  subgraph clusterCropStressRadiation {
				label="Radiation Stress"
				fontsize=35
				pencolor=gray
				
				// Inputs
				Radiation -> RadiationStress [style=dotted, colorscheme=set14, color=4]
				PlantLeafArea -> RadiationStress [style=dotted, colorscheme=set14, color=4]
				
				// Module
				RadiationStress -> LeafGrowthRate [style=dotted, colorscheme=set14, color=4]
		    }			
		}
	}	
}    
				
 
